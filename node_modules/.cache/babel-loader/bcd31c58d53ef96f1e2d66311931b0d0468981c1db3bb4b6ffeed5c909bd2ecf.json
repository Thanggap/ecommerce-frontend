{"ast":null,"code":"import { BACKEND_URL } from \"../constants\";\nexport const getProductReviews = async productSlug => {\n  try {\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}/reviews`);\n    if (response.ok) {\n      return await response.json();\n    } else {\n      return null;\n    }\n  } catch (err) {\n    console.error(\"Error fetching reviews:\", err);\n    return null;\n  }\n};\nexport const createProductReview = async (productSlug, review) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) {\n      throw new Error(\"Not authenticated\");\n    }\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}/reviews`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(review)\n    });\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Failed to create review\");\n    }\n  } catch (err) {\n    console.error(\"Error creating review:\", err);\n    throw err;\n  }\n};","map":{"version":3,"names":["BACKEND_URL","getProductReviews","productSlug","response","fetch","ok","json","err","console","error","createProductReview","review","token","localStorage","getItem","Error","method","headers","Authorization","body","JSON","stringify","detail"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/Review.ts"],"sourcesContent":["import { BACKEND_URL } from \"../constants\";\n\nexport interface IReviewAuthor {\n  uuid: string;\n  display_name?: string;\n  email: string;\n}\n\nexport interface IReview {\n  id: number;\n  product_id: number;\n  content: string;\n  rating: number;\n  created_at: string;\n  author: IReviewAuthor;\n}\n\nexport interface IReviewListResponse {\n  reviews: IReview[];\n  average_rating: number;\n  total_reviews: number;\n}\n\nexport interface ICreateReview {\n  content: string;\n  rating: number;\n}\n\nexport const getProductReviews = async (productSlug: string): Promise<IReviewListResponse | null> => {\n  try {\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}/reviews`);\n    \n    if (response.ok) {\n      return await response.json();\n    } else {\n      return null;\n    }\n  } catch (err) {\n    console.error(\"Error fetching reviews:\", err);\n    return null;\n  }\n};\n\nexport const createProductReview = async (\n  productSlug: string,\n  review: ICreateReview\n): Promise<IReview | null> => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) {\n      throw new Error(\"Not authenticated\");\n    }\n\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}/reviews`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(review),\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Failed to create review\");\n    }\n  } catch (err) {\n    console.error(\"Error creating review:\", err);\n    throw err;\n  }\n};\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,cAAc;AA4B1C,OAAO,MAAMC,iBAAiB,GAAG,MAAOC,WAAmB,IAA0C;EACnG,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAYE,WAAY,UAAS,CAAC;IAE9E,IAAIC,QAAQ,CAACE,EAAE,EAAE;MACf,OAAO,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,OAAO,IAAI;IACb;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC7C,OAAO,IAAI;EACb;AACF,CAAC;AAED,OAAO,MAAMG,mBAAmB,GAAG,MAAAA,CACjCR,WAAmB,EACnBS,MAAqB,KACO;EAC5B,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAI,CAACF,KAAK,EAAE;MACV,MAAM,IAAIG,KAAK,CAAC,mBAAmB,CAAC;IACtC;IAEA,MAAMZ,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAYE,WAAY,UAAS,EAAE;MAC7Ec,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAG,UAASN,KAAM;MACjC,CAAC;MACDO,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,MAAM;IAC7B,CAAC,CAAC;IAEF,IAAIR,QAAQ,CAACE,EAAE,EAAE;MACf,OAAO,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,MAAMG,KAAK,GAAG,MAAMN,QAAQ,CAACG,IAAI,CAAC,CAAC;MACnC,MAAM,IAAIS,KAAK,CAACN,KAAK,CAACa,MAAM,IAAI,yBAAyB,CAAC;IAC5D;EACF,CAAC,CAAC,OAAOf,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;IAC5C,MAAMA,GAAG;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}