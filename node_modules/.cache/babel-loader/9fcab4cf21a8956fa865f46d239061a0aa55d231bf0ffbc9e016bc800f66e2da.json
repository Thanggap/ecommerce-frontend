{"ast":null,"code":"import axios from\"axios\";import{BACKEND_URL}from\"../constants\";// Tao axios instance voi base config\nconst api=axios.create({baseURL:BACKEND_URL,headers:{\"Content-Type\":\"application/json\"}});// Interceptor: Gan token vao header truoc moi request\napi.interceptors.request.use(config=>{const token=localStorage.getItem(\"access_token\");if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Interceptor: Xu ly response va loi 401\napi.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Token het han hoac khong hop le\nlocalStorage.removeItem(\"access_token\");localStorage.removeItem(\"user\");window.location.href=\"/login\";}return Promise.reject(error);});export default api;","map":{"version":3,"names":["axios","BACKEND_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosError, InternalAxiosRequestConfig, AxiosResponse } from \"axios\";\nimport { BACKEND_URL } from \"../constants\";\n\n// Tao axios instance voi base config\nconst api = axios.create({\n  baseURL: BACKEND_URL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\n// Interceptor: Gan token vao header truoc moi request\napi.interceptors.request.use(\n  (config: InternalAxiosRequestConfig) => {\n    const token = localStorage.getItem(\"access_token\");\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error: AxiosError) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor: Xu ly response va loi 401\napi.interceptors.response.use(\n  (response: AxiosResponse) => response,\n  (error: AxiosError) => {\n    if (error.response?.status === 401) {\n      // Token het han hoac khong hop le\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAiE,OAAO,CACpF,OAASC,WAAW,KAAQ,cAAc,CAE1C;AACA,KAAM,CAAAC,GAAG,CAAGF,KAAK,CAACG,MAAM,CAAC,CACvBC,OAAO,CAAEH,WAAW,CACpBI,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAkC,EAAK,CACtC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAClD,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACJ,OAAO,CAACQ,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAClD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CACAM,KAAiB,EAAK,CACrB,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED;AACAb,GAAG,CAACI,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC1BU,QAAuB,EAAKA,QAAQ,CACpCH,KAAiB,EAAK,KAAAI,eAAA,CACrB,GAAI,EAAAA,eAAA,CAAAJ,KAAK,CAACG,QAAQ,UAAAC,eAAA,iBAAdA,eAAA,CAAgBC,MAAM,IAAK,GAAG,CAAE,CAClC;AACAT,YAAY,CAACU,UAAU,CAAC,cAAc,CAAC,CACvCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CACA,MAAO,CAAAR,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,cAAe,CAAAb,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}