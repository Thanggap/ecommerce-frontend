{"ast":null,"code":"import api from \"./api\";\n// Dang ky tai khoan\nexport const register = async data => {\n  const response = await api.post(\"/auth/register\", data);\n  return response.data;\n};\n\n// Dang nhap\nexport const login = async data => {\n  const response = await api.post(\"/auth/login\", data);\n\n  // Luu token va user info\n  localStorage.setItem(\"access_token\", response.data.access_token);\n  localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n  return response.data;\n};\n\n// Dang xuat\nexport const logout = () => {\n  localStorage.removeItem(\"access_token\");\n  localStorage.removeItem(\"user\");\n  window.location.href = \"/login\";\n};\n\n// Lay thong tin user hien tai tu localStorage\nexport const getCurrentUser = () => {\n  const userStr = localStorage.getItem(\"user\");\n  if (userStr) {\n    try {\n      return JSON.parse(userStr);\n    } catch {\n      return null;\n    }\n  }\n  return null;\n};\n\n// Check da dang nhap chua\nexport const isAuthenticated = () => {\n  return !!localStorage.getItem(\"access_token\");\n};\n\n// Check co phai admin khong\nexport const isAdmin = () => {\n  const user = getCurrentUser();\n  return (user === null || user === void 0 ? void 0 : user.role) === \"admin\";\n};\n\n// Lay thong tin user tu server (verify token)\nexport const getMe = async () => {\n  const response = await api.get(\"/auth/me\");\n  return response.data;\n};","map":{"version":3,"names":["api","register","data","response","post","login","localStorage","setItem","access_token","JSON","stringify","user","logout","removeItem","window","location","href","getCurrentUser","userStr","getItem","parse","isAuthenticated","isAdmin","role","getMe","get"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/Auth.ts"],"sourcesContent":["import api from \"./api\";\nimport { IUser, ILoginResponse, IRegisterRequest, ILoginRequest } from \"../types/AuthTypes\";\n\n// Dang ky tai khoan\nexport const register = async (data: IRegisterRequest): Promise<IUser> => {\n  const response = await api.post(\"/auth/register\", data);\n  return response.data;\n};\n\n// Dang nhap\nexport const login = async (data: ILoginRequest): Promise<ILoginResponse> => {\n  const response = await api.post(\"/auth/login\", data);\n  \n  // Luu token va user info\n  localStorage.setItem(\"access_token\", response.data.access_token);\n  localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n  \n  return response.data;\n};\n\n// Dang xuat\nexport const logout = (): void => {\n  localStorage.removeItem(\"access_token\");\n  localStorage.removeItem(\"user\");\n  window.location.href = \"/login\";\n};\n\n// Lay thong tin user hien tai tu localStorage\nexport const getCurrentUser = (): IUser | null => {\n  const userStr = localStorage.getItem(\"user\");\n  if (userStr) {\n    try {\n      return JSON.parse(userStr);\n    } catch {\n      return null;\n    }\n  }\n  return null;\n};\n\n// Check da dang nhap chua\nexport const isAuthenticated = (): boolean => {\n  return !!localStorage.getItem(\"access_token\");\n};\n\n// Check co phai admin khong\nexport const isAdmin = (): boolean => {\n  const user = getCurrentUser();\n  return user?.role === \"admin\";\n};\n\n// Lay thong tin user tu server (verify token)\nexport const getMe = async (): Promise<IUser> => {\n  const response = await api.get(\"/auth/me\");\n  return response.data;\n};\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAGvB;AACA,OAAO,MAAMC,QAAQ,GAAG,MAAOC,IAAsB,IAAqB;EACxE,MAAMC,QAAQ,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,gBAAgB,EAAEF,IAAI,CAAC;EACvD,OAAOC,QAAQ,CAACD,IAAI;AACtB,CAAC;;AAED;AACA,OAAO,MAAMG,KAAK,GAAG,MAAOH,IAAmB,IAA8B;EAC3E,MAAMC,QAAQ,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,aAAa,EAAEF,IAAI,CAAC;;EAEpD;EACAI,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEJ,QAAQ,CAACD,IAAI,CAACM,YAAY,CAAC;EAChEF,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEE,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACD,IAAI,CAACS,IAAI,CAAC,CAAC;EAEhE,OAAOR,QAAQ,CAACD,IAAI;AACtB,CAAC;;AAED;AACA,OAAO,MAAMU,MAAM,GAAGA,CAAA,KAAY;EAChCN,YAAY,CAACO,UAAU,CAAC,cAAc,CAAC;EACvCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;EAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;AACjC,CAAC;;AAED;AACA,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAoB;EAChD,MAAMC,OAAO,GAAGZ,YAAY,CAACa,OAAO,CAAC,MAAM,CAAC;EAC5C,IAAID,OAAO,EAAE;IACX,IAAI;MACF,OAAOT,IAAI,CAACW,KAAK,CAACF,OAAO,CAAC;IAC5B,CAAC,CAAC,MAAM;MACN,OAAO,IAAI;IACb;EACF;EACA,OAAO,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMG,eAAe,GAAGA,CAAA,KAAe;EAC5C,OAAO,CAAC,CAACf,YAAY,CAACa,OAAO,CAAC,cAAc,CAAC;AAC/C,CAAC;;AAED;AACA,OAAO,MAAMG,OAAO,GAAGA,CAAA,KAAe;EACpC,MAAMX,IAAI,GAAGM,cAAc,CAAC,CAAC;EAC7B,OAAO,CAAAN,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEY,IAAI,MAAK,OAAO;AAC/B,CAAC;;AAED;AACA,OAAO,MAAMC,KAAK,GAAG,MAAAA,CAAA,KAA4B;EAC/C,MAAMrB,QAAQ,GAAG,MAAMH,GAAG,CAACyB,GAAG,CAAC,UAAU,CAAC;EAC1C,OAAOtB,QAAQ,CAACD,IAAI;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}