{"ast":null,"code":"import{BACKEND_URL}from\"../constants\";export const getProductInfo=async productID=>{try{const response=await fetch(\"\".concat(BACKEND_URL,\"/products/\").concat(productID)).then(res=>{if(res.ok){return res.json();}else{return null;}});return response;}catch(err){console.error(\"Error fetching product information\");}};export const getProductList=async function(){let filters=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{const params=new URLSearchParams();if(filters.page!==undefined)params.append(\"page\",filters.page.toString());if(filters.limit!==undefined)params.append(\"limit\",filters.limit.toString());if(filters.category)params.append(\"category\",filters.category);if(filters.product_type)params.append(\"product_type\",filters.product_type);if(filters.min_price!==undefined)params.append(\"min_price\",filters.min_price.toString());if(filters.max_price!==undefined)params.append(\"max_price\",filters.max_price.toString());if(filters.search)params.append(\"search\",filters.search);const response=await fetch(\"\".concat(BACKEND_URL,\"/products?\").concat(params.toString()));if(response.ok){return await response.json();}else{return null;}}catch(err){console.error(\"Error fetching product list:\",err);return null;}};// Upload image to Cloudinary via backend\nexport const uploadProductImage=async file=>{try{const formData=new FormData();formData.append(\"file\",file);const response=await fetch(\"\".concat(BACKEND_URL,\"/upload-image\"),{method:\"POST\",body:formData});if(response.ok){return await response.json();}else{throw new Error(\"Upload failed\");}}catch(err){console.error(\"Error uploading image:\",err);return null;}};// Create new product\nexport const createProduct=async product=>{try{const token=localStorage.getItem(\"access_token\");const response=await fetch(\"\".concat(BACKEND_URL,\"/products\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify(product)});if(response.ok){return await response.json();}else{throw new Error(\"Create product failed\");}}catch(err){console.error(\"Error creating product:\",err);return null;}};// Update product\nexport const updateProduct=async(productSlug,product)=>{try{const token=localStorage.getItem(\"access_token\");const response=await fetch(\"\".concat(BACKEND_URL,\"/products/\").concat(productSlug),{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(token)},body:JSON.stringify(product)});if(response.ok){return await response.json();}else{const error=await response.json();throw new Error(error.detail||\"Update product failed\");}}catch(err){console.error(\"Error updating product:\",err);throw err;}};// Delete product\nexport const deleteProduct=async productSlug=>{try{const token=localStorage.getItem(\"access_token\");const response=await fetch(\"\".concat(BACKEND_URL,\"/products/\").concat(productSlug),{method:\"DELETE\",headers:{\"Authorization\":\"Bearer \".concat(token)}});if(response.ok){return await response.json();}else{const error=await response.json();throw new Error(error.detail||\"Delete product failed\");}}catch(err){console.error(\"Error deleting product:\",err);throw err;}};","map":{"version":3,"names":["BACKEND_URL","getProductInfo","productID","response","fetch","concat","then","res","ok","json","err","console","error","getProductList","filters","arguments","length","undefined","params","URLSearchParams","page","append","toString","limit","category","product_type","min_price","max_price","search","uploadProductImage","file","formData","FormData","method","body","Error","createProduct","product","token","localStorage","getItem","headers","JSON","stringify","updateProduct","productSlug","detail","deleteProduct"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/Product.ts"],"sourcesContent":["import { BACKEND_URL } from \"../constants\";\n\nexport const getProductInfo = async (productID: string) => {\n  try {\n    const response = await fetch(`${BACKEND_URL}/products/${productID}`).then(\n      (res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return null;\n        }\n      }\n    );\n    return response;\n  } catch (err) {\n    console.error(\"Error fetching product information\");\n  }\n};\n\nexport interface IProductFilters {\n  page?: number;\n  limit?: number;\n  category?: string;\n  product_type?: string;\n  min_price?: number;\n  max_price?: number;\n  search?: string;\n}\n\nexport const getProductList = async (filters: IProductFilters = {}) => {\n  try {\n    const params = new URLSearchParams();\n    \n    if (filters.page !== undefined) params.append(\"page\", filters.page.toString());\n    if (filters.limit !== undefined) params.append(\"limit\", filters.limit.toString());\n    if (filters.category) params.append(\"category\", filters.category);\n    if (filters.product_type) params.append(\"product_type\", filters.product_type);\n    if (filters.min_price !== undefined) params.append(\"min_price\", filters.min_price.toString());\n    if (filters.max_price !== undefined) params.append(\"max_price\", filters.max_price.toString());\n    if (filters.search) params.append(\"search\", filters.search);\n\n    const response = await fetch(`${BACKEND_URL}/products?${params.toString()}`);\n    \n    if (response.ok) {\n      return await response.json();\n    } else {\n      return null;\n    }\n  } catch (err) {\n    console.error(\"Error fetching product list:\", err);\n    return null;\n  }\n};\n\n// Upload image to Cloudinary via backend\nexport const uploadProductImage = async (file: File) => {\n  try {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    const response = await fetch(`${BACKEND_URL}/upload-image`, {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Upload failed\");\n    }\n  } catch (err) {\n    console.error(\"Error uploading image:\", err);\n    return null;\n  }\n};\n\n// Create new product\nexport interface ICreateProduct {\n  slug: string;\n  product_type: string;\n  product_name: string;\n  price: number;\n  blurb?: string;\n  description?: string;\n  image_url?: string;\n  sale_price?: number;\n}\n\nexport const createProduct = async (product: ICreateProduct) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(product),\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Create product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error creating product:\", err);\n    return null;\n  }\n};\n\n// Update product\nexport interface IUpdateProduct {\n  slug?: string;\n  product_type?: string;\n  product_name?: string;\n  price?: number;\n  blurb?: string;\n  description?: string;\n  image_url?: string;\n  sale_price?: number;\n}\n\nexport const updateProduct = async (productSlug: string, product: IUpdateProduct) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(product),\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Update product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error updating product:\", err);\n    throw err;\n  }\n};\n\n// Delete product\nexport const deleteProduct = async (productSlug: string) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Delete product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error deleting product:\", err);\n    throw err;\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}