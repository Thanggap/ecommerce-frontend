{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from\"react\";import{getCurrentUser,isAuthenticated,logout as authLogout}from\"../services/Auth\";import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext({user:null,isLoggedIn:false,setUser:()=>{},logout:()=>{}});export const useAuth=()=>useContext(AuthContext);export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{// Check login status on mount\nif(isAuthenticated()){const currentUser=getCurrentUser();setUser(currentUser);setIsLoggedIn(true);}},[]);const handleSetUser=newUser=>{setUser(newUser);setIsLoggedIn(!!newUser);};const handleLogout=()=>{authLogout();setUser(null);setIsLoggedIn(false);};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,isLoggedIn,setUser:handleSetUser,logout:handleLogout},children:children});};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","getCurrentUser","isAuthenticated","logout","authLogout","jsx","_jsx","AuthContext","user","isLoggedIn","setUser","useAuth","AuthProvider","_ref","children","setIsLoggedIn","currentUser","handleSetUser","newUser","handleLogout","Provider","value"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { IUser } from \"../types/AuthTypes\";\nimport { getCurrentUser, isAuthenticated, logout as authLogout } from \"../services/Auth\";\n\ninterface AuthContextType {\n  user: IUser | null;\n  isLoggedIn: boolean;\n  setUser: (user: IUser | null) => void;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  isLoggedIn: false,\n  setUser: () => {},\n  logout: () => {},\n});\n\nexport const useAuth = () => useContext(AuthContext);\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<IUser | null>(null);\n  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n\n  useEffect(() => {\n    // Check login status on mount\n    if (isAuthenticated()) {\n      const currentUser = getCurrentUser();\n      setUser(currentUser);\n      setIsLoggedIn(true);\n    }\n  }, []);\n\n  const handleSetUser = (newUser: IUser | null) => {\n    setUser(newUser);\n    setIsLoggedIn(!!newUser);\n  };\n\n  const handleLogout = () => {\n    authLogout();\n    setUser(null);\n    setIsLoggedIn(false);\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        isLoggedIn,\n        setUser: handleSetUser,\n        logout: handleLogout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAmB,OAAO,CAExF,OAASC,cAAc,CAAEC,eAAe,CAAEC,MAAM,GAAI,CAAAC,UAAU,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBASzF,KAAM,CAAAC,WAAW,cAAGV,aAAa,CAAkB,CACjDW,IAAI,CAAE,IAAI,CACVC,UAAU,CAAE,KAAK,CACjBC,OAAO,CAAEA,CAAA,GAAM,CAAC,CAAC,CACjBP,MAAM,CAAEA,CAAA,GAAM,CAAC,CACjB,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAQ,OAAO,CAAGA,CAAA,GAAMb,UAAU,CAACS,WAAW,CAAC,CAMpD,MAAO,MAAM,CAAAK,YAAyC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACpE,KAAM,CAACL,IAAI,CAAEE,OAAO,CAAC,CAAGX,QAAQ,CAAe,IAAI,CAAC,CACpD,KAAM,CAACU,UAAU,CAAEM,aAAa,CAAC,CAAGhB,QAAQ,CAAU,KAAK,CAAC,CAE5DC,SAAS,CAAC,IAAM,CACd;AACA,GAAIE,eAAe,CAAC,CAAC,CAAE,CACrB,KAAM,CAAAc,WAAW,CAAGf,cAAc,CAAC,CAAC,CACpCS,OAAO,CAACM,WAAW,CAAC,CACpBD,aAAa,CAAC,IAAI,CAAC,CACrB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,aAAa,CAAIC,OAAqB,EAAK,CAC/CR,OAAO,CAACQ,OAAO,CAAC,CAChBH,aAAa,CAAC,CAAC,CAACG,OAAO,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBf,UAAU,CAAC,CAAC,CACZM,OAAO,CAAC,IAAI,CAAC,CACbK,aAAa,CAAC,KAAK,CAAC,CACtB,CAAC,CAED,mBACET,IAAA,CAACC,WAAW,CAACa,QAAQ,EACnBC,KAAK,CAAE,CACLb,IAAI,CACJC,UAAU,CACVC,OAAO,CAAEO,aAAa,CACtBd,MAAM,CAAEgB,YACV,CAAE,CAAAL,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,cAAe,CAAAP,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}