{"ast":null,"code":"import { BACKEND_URL } from \"../constants\";\nexport const getProductInfo = async productID => {\n  try {\n    const response = await fetch(`${BACKEND_URL}/products/${productID}`).then(res => {\n      if (res.ok) {\n        return res.json();\n      } else {\n        return null;\n      }\n    });\n    return response;\n  } catch (err) {\n    console.error(\"Error fetching product information\");\n  }\n};\nexport const getProductList = async (filters = {}) => {\n  try {\n    const params = new URLSearchParams();\n    if (filters.page !== undefined) params.append(\"page\", filters.page.toString());\n    if (filters.limit !== undefined) params.append(\"limit\", filters.limit.toString());\n    if (filters.category) params.append(\"category\", filters.category);\n    if (filters.product_type) params.append(\"product_type\", filters.product_type);\n    if (filters.min_price !== undefined) params.append(\"min_price\", filters.min_price.toString());\n    if (filters.max_price !== undefined) params.append(\"max_price\", filters.max_price.toString());\n    if (filters.search) params.append(\"search\", filters.search);\n    const response = await fetch(`${BACKEND_URL}/products?${params.toString()}`);\n    if (response.ok) {\n      return await response.json();\n    } else {\n      return null;\n    }\n  } catch (err) {\n    console.error(\"Error fetching product list:\", err);\n    return null;\n  }\n};\n\n// Upload image to Cloudinary via backend\nexport const uploadProductImage = async file => {\n  try {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    const response = await fetch(`${BACKEND_URL}/upload-image`, {\n      method: \"POST\",\n      body: formData\n    });\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Upload failed\");\n    }\n  } catch (err) {\n    console.error(\"Error uploading image:\", err);\n    return null;\n  }\n};\n\n// Create new product\n\nexport const createProduct = async product => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: JSON.stringify(product)\n    });\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Create product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error creating product:\", err);\n    return null;\n  }\n};\n\n// Update product\n\nexport const updateProduct = async (productSlug, product) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`\n      },\n      body: JSON.stringify(product)\n    });\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Update product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error updating product:\", err);\n    throw err;\n  }\n};\n\n// Delete product\nexport const deleteProduct = async productSlug => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Delete product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error deleting product:\", err);\n    throw err;\n  }\n};","map":{"version":3,"names":["BACKEND_URL","getProductInfo","productID","response","fetch","then","res","ok","json","err","console","error","getProductList","filters","params","URLSearchParams","page","undefined","append","toString","limit","category","product_type","min_price","max_price","search","uploadProductImage","file","formData","FormData","method","body","Error","createProduct","product","token","localStorage","getItem","headers","JSON","stringify","updateProduct","productSlug","detail","deleteProduct"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/Product.ts"],"sourcesContent":["import { BACKEND_URL } from \"../constants\";\n\nexport const getProductInfo = async (productID: string) => {\n  try {\n    const response = await fetch(`${BACKEND_URL}/products/${productID}`).then(\n      (res) => {\n        if (res.ok) {\n          return res.json();\n        } else {\n          return null;\n        }\n      }\n    );\n    return response;\n  } catch (err) {\n    console.error(\"Error fetching product information\");\n  }\n};\n\nexport interface IProductFilters {\n  page?: number;\n  limit?: number;\n  category?: string;\n  product_type?: string;\n  min_price?: number;\n  max_price?: number;\n  search?: string;\n}\n\nexport const getProductList = async (filters: IProductFilters = {}) => {\n  try {\n    const params = new URLSearchParams();\n    \n    if (filters.page !== undefined) params.append(\"page\", filters.page.toString());\n    if (filters.limit !== undefined) params.append(\"limit\", filters.limit.toString());\n    if (filters.category) params.append(\"category\", filters.category);\n    if (filters.product_type) params.append(\"product_type\", filters.product_type);\n    if (filters.min_price !== undefined) params.append(\"min_price\", filters.min_price.toString());\n    if (filters.max_price !== undefined) params.append(\"max_price\", filters.max_price.toString());\n    if (filters.search) params.append(\"search\", filters.search);\n\n    const response = await fetch(`${BACKEND_URL}/products?${params.toString()}`);\n    \n    if (response.ok) {\n      return await response.json();\n    } else {\n      return null;\n    }\n  } catch (err) {\n    console.error(\"Error fetching product list:\", err);\n    return null;\n  }\n};\n\n// Upload image to Cloudinary via backend\nexport const uploadProductImage = async (file: File) => {\n  try {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n\n    const response = await fetch(`${BACKEND_URL}/upload-image`, {\n      method: \"POST\",\n      body: formData,\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Upload failed\");\n    }\n  } catch (err) {\n    console.error(\"Error uploading image:\", err);\n    return null;\n  }\n};\n\n// Create new product\nexport interface ICreateProduct {\n  slug: string;\n  product_type: string;\n  product_name: string;\n  price: number;\n  stock: number;\n  blurb?: string;\n  description?: string;\n  image_url?: string;\n  sale_price?: number;\n  sizes?: Array<{\n    size: string;\n    stock_quantity: number;\n  }>;\n  colors?: Array<{\n    color: string;\n    image_url?: string;\n  }>;\n}\n\nexport const createProduct = async (product: ICreateProduct) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(product),\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      throw new Error(\"Create product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error creating product:\", err);\n    return null;\n  }\n};\n\n// Update product\nexport interface IUpdateProduct {\n  slug?: string;\n  product_type?: string;\n  product_name?: string;\n  price?: number;\n  blurb?: string;\n  description?: string;\n  image_url?: string;\n  sale_price?: number;\n}\n\nexport const updateProduct = async (productSlug: string, product: IUpdateProduct) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": `Bearer ${token}`,\n      },\n      body: JSON.stringify(product),\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Update product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error updating product:\", err);\n    throw err;\n  }\n};\n\n// Delete product\nexport const deleteProduct = async (productSlug: string) => {\n  try {\n    const token = localStorage.getItem(\"access_token\");\n    const response = await fetch(`${BACKEND_URL}/products/${productSlug}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n      },\n    });\n\n    if (response.ok) {\n      return await response.json();\n    } else {\n      const error = await response.json();\n      throw new Error(error.detail || \"Delete product failed\");\n    }\n  } catch (err) {\n    console.error(\"Error deleting product:\", err);\n    throw err;\n  }\n};\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,cAAc;AAE1C,OAAO,MAAMC,cAAc,GAAG,MAAOC,SAAiB,IAAK;EACzD,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAYE,SAAU,EAAC,CAAC,CAACG,IAAI,CACtEC,GAAG,IAAK;MACP,IAAIA,GAAG,CAACC,EAAE,EAAE;QACV,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;MACnB,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CACF,CAAC;IACD,OAAOL,QAAQ;EACjB,CAAC,CAAC,OAAOM,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,oCAAoC,CAAC;EACrD;AACF,CAAC;AAYD,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAOC,OAAwB,GAAG,CAAC,CAAC,KAAK;EACrE,IAAI;IACF,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;IAEpC,IAAIF,OAAO,CAACG,IAAI,KAAKC,SAAS,EAAEH,MAAM,CAACI,MAAM,CAAC,MAAM,EAAEL,OAAO,CAACG,IAAI,CAACG,QAAQ,CAAC,CAAC,CAAC;IAC9E,IAAIN,OAAO,CAACO,KAAK,KAAKH,SAAS,EAAEH,MAAM,CAACI,MAAM,CAAC,OAAO,EAAEL,OAAO,CAACO,KAAK,CAACD,QAAQ,CAAC,CAAC,CAAC;IACjF,IAAIN,OAAO,CAACQ,QAAQ,EAAEP,MAAM,CAACI,MAAM,CAAC,UAAU,EAAEL,OAAO,CAACQ,QAAQ,CAAC;IACjE,IAAIR,OAAO,CAACS,YAAY,EAAER,MAAM,CAACI,MAAM,CAAC,cAAc,EAAEL,OAAO,CAACS,YAAY,CAAC;IAC7E,IAAIT,OAAO,CAACU,SAAS,KAAKN,SAAS,EAAEH,MAAM,CAACI,MAAM,CAAC,WAAW,EAAEL,OAAO,CAACU,SAAS,CAACJ,QAAQ,CAAC,CAAC,CAAC;IAC7F,IAAIN,OAAO,CAACW,SAAS,KAAKP,SAAS,EAAEH,MAAM,CAACI,MAAM,CAAC,WAAW,EAAEL,OAAO,CAACW,SAAS,CAACL,QAAQ,CAAC,CAAC,CAAC;IAC7F,IAAIN,OAAO,CAACY,MAAM,EAAEX,MAAM,CAACI,MAAM,CAAC,QAAQ,EAAEL,OAAO,CAACY,MAAM,CAAC;IAE3D,MAAMtB,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAYc,MAAM,CAACK,QAAQ,CAAC,CAAE,EAAC,CAAC;IAE5E,IAAIhB,QAAQ,CAACI,EAAE,EAAE;MACf,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,OAAO,IAAI;IACb;EACF,CAAC,CAAC,OAAOC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAAC;IAClD,OAAO,IAAI;EACb;AACF,CAAC;;AAED;AACA,OAAO,MAAMiB,kBAAkB,GAAG,MAAOC,IAAU,IAAK;EACtD,IAAI;IACF,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACV,MAAM,CAAC,MAAM,EAAES,IAAI,CAAC;IAE7B,MAAMxB,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,eAAc,EAAE;MAC1D8B,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEH;IACR,CAAC,CAAC;IAEF,IAAIzB,QAAQ,CAACI,EAAE,EAAE;MACf,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,MAAM,IAAIwB,KAAK,CAAC,eAAe,CAAC;IAClC;EACF,CAAC,CAAC,OAAOvB,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;IAC5C,OAAO,IAAI;EACb;AACF,CAAC;;AAED;;AAqBA,OAAO,MAAMwB,aAAa,GAAG,MAAOC,OAAuB,IAAK;EAC9D,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,MAAMlC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,WAAU,EAAE;MACtD8B,MAAM,EAAE,MAAM;MACdQ,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASH,KAAM;MACnC,CAAC;MACDJ,IAAI,EAAEQ,IAAI,CAACC,SAAS,CAACN,OAAO;IAC9B,CAAC,CAAC;IAEF,IAAI/B,QAAQ,CAACI,EAAE,EAAE;MACf,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,MAAM,IAAIwB,KAAK,CAAC,uBAAuB,CAAC;IAC1C;EACF,CAAC,CAAC,OAAOvB,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC7C,OAAO,IAAI;EACb;AACF,CAAC;;AAED;;AAYA,OAAO,MAAMgC,aAAa,GAAG,MAAAA,CAAOC,WAAmB,EAAER,OAAuB,KAAK;EACnF,IAAI;IACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,MAAMlC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAY0C,WAAY,EAAC,EAAE;MACrEZ,MAAM,EAAE,KAAK;MACbQ,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASH,KAAM;MACnC,CAAC;MACDJ,IAAI,EAAEQ,IAAI,CAACC,SAAS,CAACN,OAAO;IAC9B,CAAC,CAAC;IAEF,IAAI/B,QAAQ,CAACI,EAAE,EAAE;MACf,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,MAAMG,KAAK,GAAG,MAAMR,QAAQ,CAACK,IAAI,CAAC,CAAC;MACnC,MAAM,IAAIwB,KAAK,CAACrB,KAAK,CAACgC,MAAM,IAAI,uBAAuB,CAAC;IAC1D;EACF,CAAC,CAAC,OAAOlC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC7C,MAAMA,GAAG;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAMmC,aAAa,GAAG,MAAOF,WAAmB,IAAK;EAC1D,IAAI;IACF,MAAMP,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,MAAMlC,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEJ,WAAY,aAAY0C,WAAY,EAAC,EAAE;MACrEZ,MAAM,EAAE,QAAQ;MAChBQ,OAAO,EAAE;QACP,eAAe,EAAG,UAASH,KAAM;MACnC;IACF,CAAC,CAAC;IAEF,IAAIhC,QAAQ,CAACI,EAAE,EAAE;MACf,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,MAAM;MACL,MAAMG,KAAK,GAAG,MAAMR,QAAQ,CAACK,IAAI,CAAC,CAAC;MACnC,MAAM,IAAIwB,KAAK,CAACrB,KAAK,CAACgC,MAAM,IAAI,uBAAuB,CAAC;IAC1D;EACF,CAAC,CAAC,OAAOlC,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC7C,MAAMA,GAAG;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}