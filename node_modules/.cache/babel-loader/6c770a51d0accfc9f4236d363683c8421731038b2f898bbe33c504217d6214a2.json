{"ast":null,"code":"import React,{useState}from\"react\";import{Typography,TextField,Button,Box,Container,Alert,Link}from\"@mui/material\";import{useNavigate}from\"react-router-dom\";import AuthPage from\"./AuthPage\";import{login}from\"../../services/Auth\";import{useAuth}from\"../../context/AuthContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const navigate=useNavigate();const{setUser}=useAuth();const handleSubmit=async e=>{e.preventDefault();setError(\"\");setLoading(true);try{const response=await login({email,password});setUser(response.user);// Redirect theo role\nif(response.user.role===\"admin\"){navigate(\"/admin\");}else{navigate(\"/\");}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||\"Dang nhap that bai\");}finally{setLoading(false);}};return/*#__PURE__*/_jsx(AuthPage,{children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",children:/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",mt:4},children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Login\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true,value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},disabled:loading,children:loading?\"Dang xu ly...\":\"Dang nhap\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:2},children:error}),/*#__PURE__*/_jsx(Box,{sx:{textAlign:\"center\",mt:2},children:/*#__PURE__*/_jsx(Link,{href:\"/register\",underline:\"hover\",children:\"Chua co tai khoan? Dang ky ngay\"})})]})]})})});}","map":{"version":3,"names":["React","useState","Typography","TextField","Button","Box","Container","Alert","Link","useNavigate","AuthPage","login","useAuth","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","error","setError","loading","setLoading","navigate","setUser","handleSubmit","e","preventDefault","response","user","role","err","_err$response","_err$response$data","data","detail","children","maxWidth","sx","display","flexDirection","alignItems","mt","component","variant","onSubmit","margin","required","fullWidth","id","label","name","autoComplete","autoFocus","value","onChange","target","type","mb","disabled","severity","textAlign","href","underline"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/pages/auth/Login.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Typography, TextField, Button, Box, Container, Alert, Link } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthPage from \"./AuthPage\";\nimport { login } from \"../../services/Auth\";\nimport { useAuth } from \"../../context/AuthContext\";\n\nexport default function Login() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n  const { setUser } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(\"\");\n    setLoading(true);\n\n    try {\n      const response = await login({ email, password });\n      setUser(response.user);\n      \n      // Redirect theo role\n      if (response.user.role === \"admin\") {\n        navigate(\"/admin\");\n      } else {\n        navigate(\"/\");\n      }\n    } catch (err: any) {\n      setError(err.response?.data?.detail || \"Dang nhap that bai\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AuthPage>\n      <Container maxWidth=\"xs\">\n        <Box\n          sx={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            mt: 4,\n          }}\n        >\n          <Typography component=\"h1\" variant=\"h5\">\n            Login\n          </Typography>\n          <Box component=\"form\" onSubmit={handleSubmit} sx={{ mt: 1 }}>\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"email\"\n              label=\"Email Address\"\n              name=\"email\"\n              autoComplete=\"email\"\n              autoFocus\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n            <TextField\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              sx={{ mt: 3, mb: 2 }}\n              disabled={loading}\n            >\n              {loading ? \"Dang xu ly...\" : \"Dang nhap\"}\n            </Button>\n            {error && (\n              <Alert severity=\"error\" sx={{ mt: 2 }}>\n                {error}\n              </Alert>\n            )}\n            <Box sx={{ textAlign: \"center\", mt: 2 }}>\n              <Link href=\"/register\" underline=\"hover\">\n                Chua co tai khoan? Dang ky ngay\n              </Link>\n            </Box>\n          </Box>\n        </Box>\n      </Container>\n    </AuthPage>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}