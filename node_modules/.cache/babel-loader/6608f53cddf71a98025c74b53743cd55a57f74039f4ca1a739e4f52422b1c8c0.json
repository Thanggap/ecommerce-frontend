{"ast":null,"code":"import React,{useEffect,useContext,useState}from\"react\";import ShoppingBagOutlinedIcon from\"@mui/icons-material/ShoppingBagOutlined\";import SideDrawer from\"../modal/SideDrawer/SideDrawer\";import{Typography,Box,Button}from\"@mui/material\";import Divider from\"@mui/material/Divider\";import{AWS_S3_BASE_URL}from\"../../../constants\";import{CartContext}from\"../../../App\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Cart(){const[open,setOpen]=useState(false);const{cart,setCart}=useContext(CartContext);const[subTotal,setSubTotal]=useState(0);const[tax,setTax]=useState(0);const[total,setTotal]=useState(0);useEffect(()=>{const newSubTotal=cart.reduce((accumulator,cartItem)=>{const price=cartItem.product.sale_price||cartItem.product.price;return accumulator+price*cartItem.quantity;},0);setSubTotal(newSubTotal);console.log(total);},[cart]);useEffect(()=>{setTax(0.07*Number(subTotal));},[subTotal]);useEffect(()=>{setTotal(Number(tax)+Number(subTotal));},[tax]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"hover:opacity-70\",onClick:()=>{setOpen(!open);},children:/*#__PURE__*/_jsx(ShoppingBagOutlinedIcon,{})}),/*#__PURE__*/_jsxs(SideDrawer,{open:open,setOpen:setOpen,title:\"Your Cart\",children:[cart.map((cartItem,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"aside\",{children:/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsx(\"img\",{width:100,src:AWS_S3_BASE_URL+cartItem.product.image_url})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Typography,{children:cartItem.product.product_name}),/*#__PURE__*/_jsxs(Typography,{color:\"gray\",children:[cartItem.color,\" | \",cartItem.size]}),/*#__PURE__*/_jsxs(Typography,{fontWeight:600,fontSize:14,children:[\"Qty: \",cartItem.quantity]}),/*#__PURE__*/_jsxs(Typography,{fontWeight:600,fontSize:14,children:[\"$\",cartItem.product.sale_price?cartItem.product.sale_price:cartItem.product.price]})]})]})),/*#__PURE__*/_jsxs(Box,{sx:{padding:4,position:\"absolute\",bottom:0,left:0,width:\"100%\"},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Subtotal: $\",subTotal.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(Typography,{children:[\"Tax: $\",tax.toFixed(2),\" \"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h5\",children:[\"Total: $\",total.toFixed(2),\" \"]})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Button,{children:\"Checkout\"})]})]})]});}","map":{"version":3,"names":["React","useEffect","useContext","useState","ShoppingBagOutlinedIcon","SideDrawer","Typography","Box","Button","Divider","AWS_S3_BASE_URL","CartContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","open","setOpen","cart","setCart","subTotal","setSubTotal","tax","setTax","total","setTotal","newSubTotal","reduce","accumulator","cartItem","price","product","sale_price","quantity","console","log","Number","children","className","onClick","title","map","i","width","src","image_url","product_name","color","size","fontWeight","fontSize","sx","padding","position","bottom","left","variant","toFixed"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/components/shared/cart/Cart.tsx"],"sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\nimport ShoppingBagOutlinedIcon from \"@mui/icons-material/ShoppingBagOutlined\";\nimport SideDrawer from \"../modal/SideDrawer/SideDrawer\";\nimport { Typography, Box, Button } from \"@mui/material\";\nimport Divider from \"@mui/material/Divider\";\nimport { AWS_S3_BASE_URL } from \"../../../constants\";\nimport { CartContext } from \"../../../App\";\n\nimport DeleteIcon from \"@mui/icons-material/Delete\";\nexport default function Cart() {\n  const [open, setOpen] = useState(false);\n  const { cart, setCart } = useContext(CartContext);\n  const [subTotal, setSubTotal] = useState<Number>(0);\n  const [tax, setTax] = useState<Number>(0);\n  const [total, setTotal] = useState<Number>(0);\n  useEffect(() => {\n    const newSubTotal = cart.reduce((accumulator, cartItem) => {\n      const price = cartItem.product.sale_price || cartItem.product.price;\n      return accumulator + price * cartItem.quantity;\n    }, 0);\n    setSubTotal(newSubTotal);\n    console.log(total);\n  }, [cart]);\n\n  useEffect(() => {\n    setTax(0.07 * Number(subTotal));\n  }, [subTotal]);\n\n  useEffect(() => {\n    setTotal(Number(tax) + Number(subTotal));\n  }, [tax]);\n  return (\n    <>\n      <button\n        className=\"hover:opacity-70\"\n        onClick={() => {\n          setOpen(!open);\n        }}\n      >\n        <ShoppingBagOutlinedIcon />\n      </button>\n      <SideDrawer open={open} setOpen={setOpen} title=\"Your Cart\">\n        {cart.map((cartItem, i) => (\n          <div className=\"border p-2 flex items-center gap-2\">\n            <aside>\n              <figure>\n                <img\n                  width={100}\n                  src={AWS_S3_BASE_URL + cartItem.product.image_url}\n                />\n              </figure>\n            </aside>\n            <div>\n              <Typography>{cartItem.product.product_name}</Typography>\n              <Typography color={\"gray\"}>\n                {cartItem.color} | {cartItem.size}\n              </Typography>\n              <Typography fontWeight={600} fontSize={14}>\n                Qty: {cartItem.quantity}\n              </Typography>\n              <Typography fontWeight={600} fontSize={14}>\n                $\n                {cartItem.product.sale_price\n                  ? cartItem.product.sale_price\n                  : cartItem.product.price}\n              </Typography>\n            </div>\n          </div>\n        ))}\n        <Box\n          sx={{\n            padding: 4,\n            position: \"absolute\",\n            bottom: 0,\n            left: 0,\n            width: \"100%\",\n          }}\n        >\n          <Box>\n            <Typography variant=\"h6\">\n              Subtotal: ${subTotal.toFixed(2)}{\" \"}\n            </Typography>\n            <Typography>Tax: ${tax.toFixed(2)} </Typography>\n            <Typography variant=\"h5\">Total: ${total.toFixed(2)} </Typography>\n          </Box>\n          <Divider />\n          <Button>Checkout</Button>\n        </Box>\n      </SideDrawer>\n    </>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}