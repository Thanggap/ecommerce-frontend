{"ast":null,"code":"import React from\"react\";import{Navigate}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProtectedRoute(_ref){let{children,requiredRole}=_ref;const{isLoggedIn,user}=useAuth();// Chua dang nhap -> redirect login\nif(!isLoggedIn){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Yeu cau role admin nhung user khong phai admin\nif(requiredRole===\"admin\"&&(user===null||user===void 0?void 0:user.role)!==\"admin\"){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}return/*#__PURE__*/_jsx(_Fragment,{children:children});}","map":{"version":3,"names":["React","Navigate","useAuth","jsx","_jsx","Fragment","_Fragment","ProtectedRoute","_ref","children","requiredRole","isLoggedIn","user","to","replace","role"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/AuthContext\";\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  requiredRole?: \"user\" | \"admin\";\n}\n\nexport default function ProtectedRoute({\n  children,\n  requiredRole,\n}: ProtectedRouteProps) {\n  const { isLoggedIn, user } = useAuth();\n\n  // Chua dang nhap -> redirect login\n  if (!isLoggedIn) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // Yeu cau role admin nhung user khong phai admin\n  if (requiredRole === \"admin\" && user?.role !== \"admin\") {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  return <>{children}</>;\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAOjD,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAGd,IAHe,CACrCC,QAAQ,CACRC,YACmB,CAAC,CAAAF,IAAA,CACpB,KAAM,CAAEG,UAAU,CAAEC,IAAK,CAAC,CAAGV,OAAO,CAAC,CAAC,CAEtC;AACA,GAAI,CAACS,UAAU,CAAE,CACf,mBAAOP,IAAA,CAACH,QAAQ,EAACY,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIJ,YAAY,GAAK,OAAO,EAAI,CAAAE,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEG,IAAI,IAAK,OAAO,CAAE,CACtD,mBAAOX,IAAA,CAACH,QAAQ,EAACY,EAAE,CAAC,GAAG,CAACC,OAAO,MAAE,CAAC,CACpC,CAEA,mBAAOV,IAAA,CAAAE,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}