{"ast":null,"code":"import api from\"./api\";// Dang ky tai khoan\nexport const register=async data=>{const response=await api.post(\"/auth/register\",data);return response.data;};// Dang nhap\nexport const login=async data=>{const response=await api.post(\"/auth/login\",data);// Luu token va user info\nlocalStorage.setItem(\"access_token\",response.data.access_token);localStorage.setItem(\"user\",JSON.stringify(response.data.user));return response.data;};// Dang xuat\nexport const logout=()=>{localStorage.removeItem(\"access_token\");localStorage.removeItem(\"user\");window.location.href=\"/login\";};// Lay thong tin user hien tai tu localStorage\nexport const getCurrentUser=()=>{const userStr=localStorage.getItem(\"user\");if(userStr){try{return JSON.parse(userStr);}catch{return null;}}return null;};// Check da dang nhap chua\nexport const isAuthenticated=()=>{return!!localStorage.getItem(\"access_token\");};// Check co phai admin khong\nexport const isAdmin=()=>{const user=getCurrentUser();return(user===null||user===void 0?void 0:user.role)===\"admin\";};// Lay thong tin user tu server (verify token)\nexport const getMe=async()=>{const response=await api.get(\"/auth/me\");return response.data;};// Cap nhat profile\nexport const updateProfile=async data=>{const response=await api.put(\"/auth/profile\",data);// Update localStorage\nlocalStorage.setItem(\"user\",JSON.stringify(response.data));return response.data;};// Doi mat khau\nexport const changePassword=async data=>{const response=await api.put(\"/auth/change-password\",data);return response.data;};","map":{"version":3,"names":["api","register","data","response","post","login","localStorage","setItem","access_token","JSON","stringify","user","logout","removeItem","window","location","href","getCurrentUser","userStr","getItem","parse","isAuthenticated","isAdmin","role","getMe","get","updateProfile","put","changePassword"],"sources":["/home/thang/Documents/tmdt/ecommerce/frontend/src/services/Auth.ts"],"sourcesContent":["import api from \"./api\";\nimport { IUser, ILoginResponse, IRegisterRequest, ILoginRequest } from \"../types/AuthTypes\";\n\n// Dang ky tai khoan\nexport const register = async (data: IRegisterRequest): Promise<IUser> => {\n  const response = await api.post(\"/auth/register\", data);\n  return response.data;\n};\n\n// Dang nhap\nexport const login = async (data: ILoginRequest): Promise<ILoginResponse> => {\n  const response = await api.post(\"/auth/login\", data);\n  \n  // Luu token va user info\n  localStorage.setItem(\"access_token\", response.data.access_token);\n  localStorage.setItem(\"user\", JSON.stringify(response.data.user));\n  \n  return response.data;\n};\n\n// Dang xuat\nexport const logout = (): void => {\n  localStorage.removeItem(\"access_token\");\n  localStorage.removeItem(\"user\");\n  window.location.href = \"/login\";\n};\n\n// Lay thong tin user hien tai tu localStorage\nexport const getCurrentUser = (): IUser | null => {\n  const userStr = localStorage.getItem(\"user\");\n  if (userStr) {\n    try {\n      return JSON.parse(userStr);\n    } catch {\n      return null;\n    }\n  }\n  return null;\n};\n\n// Check da dang nhap chua\nexport const isAuthenticated = (): boolean => {\n  return !!localStorage.getItem(\"access_token\");\n};\n\n// Check co phai admin khong\nexport const isAdmin = (): boolean => {\n  const user = getCurrentUser();\n  return user?.role === \"admin\";\n};\n\n// Lay thong tin user tu server (verify token)\nexport const getMe = async (): Promise<IUser> => {\n  const response = await api.get(\"/auth/me\");\n  return response.data;\n};\n\n// Cap nhat profile\nexport interface IProfileUpdate {\n  first_name?: string;\n  last_name?: string;\n}\n\nexport const updateProfile = async (data: IProfileUpdate): Promise<IUser> => {\n  const response = await api.put(\"/auth/profile\", data);\n  // Update localStorage\n  localStorage.setItem(\"user\", JSON.stringify(response.data));\n  return response.data;\n};\n\n// Doi mat khau\nexport interface IPasswordChange {\n  current_password: string;\n  new_password: string;\n}\n\nexport const changePassword = async (data: IPasswordChange): Promise<{ message: string }> => {\n  const response = await api.put(\"/auth/change-password\", data);\n  return response.data;\n};\n"],"mappings":"AAAA,MAAO,CAAAA,GAAG,KAAM,OAAO,CAGvB;AACA,MAAO,MAAM,CAAAC,QAAQ,CAAG,KAAO,CAAAC,IAAsB,EAAqB,CACxE,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,gBAAgB,CAAEF,IAAI,CAAC,CACvD,MAAO,CAAAC,QAAQ,CAACD,IAAI,CACtB,CAAC,CAED;AACA,MAAO,MAAM,CAAAG,KAAK,CAAG,KAAO,CAAAH,IAAmB,EAA8B,CAC3E,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,aAAa,CAAEF,IAAI,CAAC,CAEpD;AACAI,YAAY,CAACC,OAAO,CAAC,cAAc,CAAEJ,QAAQ,CAACD,IAAI,CAACM,YAAY,CAAC,CAChEF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEE,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACD,IAAI,CAACS,IAAI,CAAC,CAAC,CAEhE,MAAO,CAAAR,QAAQ,CAACD,IAAI,CACtB,CAAC,CAED;AACA,MAAO,MAAM,CAAAU,MAAM,CAAGA,CAAA,GAAY,CAChCN,YAAY,CAACO,UAAU,CAAC,cAAc,CAAC,CACvCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC,CAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACjC,CAAC,CAED;AACA,MAAO,MAAM,CAAAC,cAAc,CAAGA,CAAA,GAAoB,CAChD,KAAM,CAAAC,OAAO,CAAGZ,YAAY,CAACa,OAAO,CAAC,MAAM,CAAC,CAC5C,GAAID,OAAO,CAAE,CACX,GAAI,CACF,MAAO,CAAAT,IAAI,CAACW,KAAK,CAACF,OAAO,CAAC,CAC5B,CAAE,KAAM,CACN,MAAO,KAAI,CACb,CACF,CACA,MAAO,KAAI,CACb,CAAC,CAED;AACA,MAAO,MAAM,CAAAG,eAAe,CAAGA,CAAA,GAAe,CAC5C,MAAO,CAAC,CAACf,YAAY,CAACa,OAAO,CAAC,cAAc,CAAC,CAC/C,CAAC,CAED;AACA,MAAO,MAAM,CAAAG,OAAO,CAAGA,CAAA,GAAe,CACpC,KAAM,CAAAX,IAAI,CAAGM,cAAc,CAAC,CAAC,CAC7B,MAAO,CAAAN,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEY,IAAI,IAAK,OAAO,CAC/B,CAAC,CAED;AACA,MAAO,MAAM,CAAAC,KAAK,CAAG,KAAAA,CAAA,GAA4B,CAC/C,KAAM,CAAArB,QAAQ,CAAG,KAAM,CAAAH,GAAG,CAACyB,GAAG,CAAC,UAAU,CAAC,CAC1C,MAAO,CAAAtB,QAAQ,CAACD,IAAI,CACtB,CAAC,CAED;AAMA,MAAO,MAAM,CAAAwB,aAAa,CAAG,KAAO,CAAAxB,IAAoB,EAAqB,CAC3E,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAH,GAAG,CAAC2B,GAAG,CAAC,eAAe,CAAEzB,IAAI,CAAC,CACrD;AACAI,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEE,IAAI,CAACC,SAAS,CAACP,QAAQ,CAACD,IAAI,CAAC,CAAC,CAC3D,MAAO,CAAAC,QAAQ,CAACD,IAAI,CACtB,CAAC,CAED;AAMA,MAAO,MAAM,CAAA0B,cAAc,CAAG,KAAO,CAAA1B,IAAqB,EAAmC,CAC3F,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAH,GAAG,CAAC2B,GAAG,CAAC,uBAAuB,CAAEzB,IAAI,CAAC,CAC7D,MAAO,CAAAC,QAAQ,CAACD,IAAI,CACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}